# Система технической поддержки - Руководство пользователя

## Обзор системы

Система технической поддержки - это веб-приложение для управления заявками клиентов с возможностью распределения задач между исполнителями и отслеживания статусов.

## Архитектура

- **Backend**: Flask API (Python) на порту 5002
- **Frontend**: React приложение (JavaScript) на порту 5173
- **База данных**: SQLite
- **Стили**: Tailwind CSS + shadcn/ui компоненты

## Роли пользователей

### 1. Заказчик (Customer)
- Создание новых заявок
- Просмотр своих заявок
- Переписка с исполнителями
- Отслеживание статусов

### 2. Исполнитель (Agent)
- Просмотр назначенных заявок
- Ответы на заявки заказчиков
- Изменение статусов заявок
- Переписка с заказчиками

### 3. Администратор (Admin)
- Полный доступ ко всем заявкам
- Назначение исполнителей на заявки
- Управление пользователями
- Изменение статусов заявок

## Статусы заявок

1. **Open** (Открыта) - Новая заявка, ожидает назначения
2. **In Progress** (В работе) - Заявка назначена исполнителю
3. **Awaiting Customer Reply** (Ожидает ответа заказчика) - Исполнитель ответил, ждет реакции заказчика
4. **Awaiting Agent Reply** (Ожидает ответа исполнителя) - Заказчик ответил, ждет реакции исполнителя
5. **Resolved** (Решена) - Проблема решена, ожидает подтверждения
6. **Closed** (Закрыта) - Заявка полностью закрыта

## API Эндпоинты

### Аутентификация
- `POST /api/register` - Регистрация нового пользователя
- `POST /api/login` - Вход в систему
- `POST /api/logout` - Выход из системы
- `GET /api/me` - Получение информации о текущем пользователе

### Пользователи
- `GET /api/users` - Список всех пользователей (только для админов)

### Заявки
- `GET /api/tickets` - Список заявок (с фильтрацией по роли)
- `POST /api/tickets` - Создание новой заявки
- `GET /api/tickets/{id}` - Получение заявки по ID
- `PUT /api/tickets/{id}/status` - Изменение статуса заявки
- `PUT /api/tickets/{id}/assign` - Назначение исполнителя

### Сообщения
- `GET /api/tickets/{id}/messages` - Получение сообщений заявки
- `POST /api/tickets/{id}/messages` - Отправка нового сообщения

### Статусы
- `GET /api/statuses` - Список всех доступных статусов

## Запуск системы

### Backend
```bash
cd support-system-backend
source venv/bin/activate
python src/main.py
```
Сервер запустится на http://localhost:5002

### Frontend
```bash
cd support-system-frontend
pnpm run dev --host
```
Приложение будет доступно на http://localhost:5173

## Тестовые данные

### Администратор
- **Логин**: admin
- **Пароль**: admin123
- **Email**: admin@support.com

## Примеры использования API

### Регистрация пользователя
```bash
curl -X POST http://localhost:5002/api/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "customer1",
    "email": "customer1@example.com",
    "password": "password123",
    "role": "customer"
  }'
```

### Вход в систему
```bash
curl -X POST http://localhost:5002/api/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }' \
  -c cookies.txt
```

### Создание заявки
```bash
curl -X POST http://localhost:5002/api/tickets \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "title": "Проблема с входом в систему",
    "description": "Не могу войти в личный кабинет",
    "priority": "High"
  }'
```

## Особенности реализации

### Безопасность
- Хеширование паролей с помощью werkzeug
- Сессионная аутентификация
- Проверка ролей для доступа к функциям

### UI/UX
- Адаптивный дизайн для мобильных устройств
- Темная и светлая темы
- Интуитивная навигация
- Современные компоненты интерфейса

### Логика статусов
- Автоматическое изменение статусов при отправке сообщений
- Различные представления для разных ролей
- Цветовая индикация приоритетов и статусов

## Возможные улучшения

1. **Уведомления в реальном времени** - WebSocket для мгновенных обновлений
2. **Файловые вложения** - Возможность прикреплять файлы к заявкам
3. **Система тегов** - Категоризация заявок по темам
4. **Аналитика** - Дашборд с метриками и отчетами
5. **Email уведомления** - Автоматические уведомления на почту
6. **API документация** - Swagger/OpenAPI документация
7. **Тестирование** - Unit и интеграционные тесты

